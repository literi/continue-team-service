# 项目构建进度计划

## 1. 项目概况

*   **项目名称**：面向Continue的扩展服务项目
*   **项目目标**：构建一套面向团队使用的Continue扩展服务，提供MCP服务、知识库及Skill能力，支持多模型切换与多租户管控。
*   **开始日期**：2026年1月20日
*   **预计工期**：6个月
*   **当前状态**：启动阶段

## 2. 总体进度规划 (甘特图摘要)

| 阶段 | 时间周期 | 主要目标 |
| :--- | :--- | :--- |
| **第一阶段：设计与规划** | 2026/01/20 - 2026/02/17 (4周) | 完成需求细化、架构详设、技术验证 |
| **第二阶段：基础建设** | 2026/02/18 - 2026/03/03 (2周) | 环境搭建、CI/CD流水线、中间件部署 |
| **第三阶段：核心开发(基础)** | 2026/03/04 - 2026/04/14 (6周) | 网关、多租户、模型适配、配置管理 |
| **第四阶段：核心开发(业务)** | 2026/04/15 - 2026/06/09 (8周) | MCP服务、知识库、Skill模块 |
| **第五阶段：集成与测试** | 2026/06/10 - 2026/07/07 (4周) | 联调、性能测试、安全审计 |
| **第六阶段：部署与交付** | 2026/07/08 - 2026/07/21 (2周) | 生产部署、灰度上线、文档移交 |

## 3. 详细任务分解

### 第一阶段：设计与规划 (第1-4周)
- [x] **1.1 需求细化**
    - [x] 确认MCP协议细节与Continue客户端对接标准
    - [x] 细化多租户权限矩阵与RBAC模型
    - [x] 确定Skill白名单与安全沙箱策略
- [x] **1.2 架构详细设计**
    - [x] 输出系统架构图、时序图 (MCP/Skill/知识库流转)
    - [x] 数据库ER图设计 (PostgreSQL)
    - [x] API接口定义 (Swagger/OpenAPI)
- [x] **1.3 技术验证 (PoC)**
    - [x] 验证SpringBoot 3 + Virtual Threads 性能
    - [x] 验证Milvus向量检索与大模型上下文拼接效果
    - [x] 验证Docker沙箱执行Skill的可行性

### 第二阶段：基础建设 (第5-6周)
- [x] **2.1 开发环境搭建**
    - [x] 部署基础中间件 (PostgreSQL, Redis, Milvus)
- [x] **2.2 工程脚手架构建**
    - [x] 创建SpringBoot多模块工程结构
    - [x] 集成Spring Security, MyBatis/JPA, Lombok等基础依赖


### 第三阶段：核心开发 - 基础服务 (第7-12周)
- [x] **3.1 统一接入网关 (Spring Cloud Gateway)**
    - [x] 实现身份认证 (OAuth2/JWT)
    - [x] 实现动态路由与负载均衡
    - [x] 集成Sentinel限流与熔断机制
- [x] **3.2 多租户管理中心**
    - [x] 开发租户/项目/用户管理接口
    - [x] 实现RBAC权限策略引擎
    - [x] 实现资源配额管控逻辑
- [ ] **3.3 模型适配层**
    - [x] 定义统一模型抽象接口 (Chat, Embedding)
    - [x] 实现OpenAI/Claude/CodeLlama适配器
    - [x] 开发模型资源池与健康度检测
- [x] **3.4 配置管理层**
    - [x] 实现分层配置 (团队/项目/个人)
    - [x] 开发配置热更新与版本回滚功能

### 第四阶段：核心开发 - 业务服务 (第13-20周)
- [ ] **4.1 MCP服务模块**
    - [ ] 实现MCP Session生命周期管理 (创建/更新/销毁)
    - [ ] 开发上下文标准化处理与裁剪逻辑
    - [ ] 实现多租户会话隔离存储
- [ ] **4.2 知识库服务模块**
    - [ ] 开发文档解析与向量化服务
    - [ ] 实现向量检索与混合检索逻辑
    - [ ] 实现知识库权限管控与版本管理
- [ ] **4.3 Skill服务模块**
    - [ ] 开发Skill插件注册机制
    - [ ] 实现Docker容器沙箱执行环境
    - [ ] 开发Skill执行审计与日志记录

### 第五阶段：集成与测试 (第21-24周)
- [ ] **5.1 模块集成**
    - [ ] 核心服务协调层联调
    - [ ] Continue客户端 (IDE插件) 对接测试
- [ ] **5.2 专项测试**
    - [ ] **性能测试**：JMeter压测 (高并发MCP请求)
    - [ ] **兼容性测试**：验证不同IDE版本与协议版本
    - [ ] **安全测试**：漏洞扫描、渗透测试、数据脱敏验证
- [ ] **5.3 问题修复**
    - [ ] 修复测试发现的Bug
    - [ ] 性能调优 (JVM, DB索引, 缓存策略)

### 第六阶段：部署与交付 (第25-26周)
- [ ] **6.1 生产环境部署**
    - [ ] 生产K8s集群资源规划与部署
    - [ ] 配置域名、SSL证书、网络策略
- [ ] **6.2 可观测性建设**
    - [ ] 部署Prometheus + Grafana监控面板
    - [ ] 配置ELK日志采集与AlertManager告警
- [ ] **6.3 上线发布**
    - [ ] 灰度发布 (小范围团队试用)
    - [ ] 全量发布
- [ ] **6.4 交付与培训**
    - [ ] 完善用户手册与运维文档
    - [ ] 进行管理员与开发者培训

## 4. 风险管理

| 风险点 | 风险等级 | 应对措施 |
| :--- | :--- | :--- |
| MCP协议官方更新频繁 | 高 | 建立协议适配层，预留版本兼容接口，关注社区动态 |
| 模型API成本超支 | 中 | 严格执行配额管理，提供Token消耗预警，支持本地模型降级 |
| 向量检索准确率不足 | 中 | 优化分块策略，引入Rerank重排序模型，支持人工干预 |
| Skill执行安全漏洞 | 高 | 强制沙箱隔离，严格白名单审核，高危操作二次确认 |

## 5. 资源需求

*   **人力**：后端开发 x3, 前端/插件开发 x1, 测试 x1, 运维 x1, PM x1
*   **硬件**：
    *   开发/测试环境：16C 32G x 3节点
    *   生产环境：32C 64G x 5节点 (含GPU服务器用于本地模型)
